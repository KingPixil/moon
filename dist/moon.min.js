/**
 * Moon v0.11.0
 * Copyright 2016-2018 Kabir Shah
 * Released under the MIT License
 * http://moonjs.ga
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Moon=t()}(this,function(){"use strict";var e=function(e){!1===ie.config.silent&&console.log(e)},t=function(e){!1===ie.config.silent&&console.error("[Moon] ERROR: "+e)},n=function(e,t){var n=e.hooks[t];void 0!==n&&n.call(e)},r=function(e,t,n,r){e[t]=void 0===n?r:n},o=function(){},i=/\{\{\s*/,a=/\s*\}\}/,s=/[\s\n]/,v=/[\s\n]/g,d=/<\/?(?:[A-Za-z]+\w*)|<!--/,f=/"[^"]*"|'[^']*'|\d+[a-zA-Z$_]\w*|\.[a-zA-Z$_]\w*|[a-zA-Z$_]\w*:|([a-zA-Z$_]\w*)(?:\s*\()?/g,u=/(?:(?:&(?:amp|gt|lt|nbsp|quot);)|"|\\|\n)/g,l={"&amp;":"&","&gt;":">","&lt;":"<","&nbsp;":" ","&quot;":'\\"',"\\":"\\\\",'"':'\\"',"\n":"\\n"},c=["NaN","false","in","instance","m","null","staticNodes","true","typeof","undefined"],p=["area","base","br","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],h=["animate","circle","clippath","cursor","defs","desc","ellipse","filter","font-face","foreignObject","g","glyph","image","line","marker","mask","missing-glyph","path","pattern","polygon","polyline","rect","svg","switch","symbol","text","textpath","tspan","use","view"],m=function(e){return e.replace(v,"")},g=function(e,t){for(var n,r=t.dependencies,o=r.props,i=r.methods,a=t.exclude,s=t.locals,v=!1;null!==(n=f.exec(e));){var d=n[0],u=n[1];void 0!==u&&-1===a.indexOf(u)&&("("===d[d.length-1]?-1===i.indexOf(u)&&i.push(u):(-1===s.indexOf(u)&&-1===o.indexOf(u)&&o.push(u),v=!0))}return v},y=function(e,t){var n=e.length,r=0,o=!1,s="";if(0===n)s='""';else for(;r<n;){var v=e.substring(r),d=v.match(i);if(null===d){s+='"'+v+'"';break}var f=d.index;0!==f&&(s+='"'+v.substring(0,f)+'"',r+=f),o=!0,0!==r&&(s+=" + "),r+=d[0].length;var u=e.substring(r),l=u.match(a),c=l.index,p=u.substring(0,c);g(p,t),s+="("+p+")",(r+=p.length+l[0].length)!==n&&(s+=" + ")}return{output:s,dynamic:o}},b=function(e,t){var n=t.length;return t[n]=e,"staticNodes["+n+"]"},x=function(e){var t="{",n="",r=e.events,o="";if(void 0!==r){for(var i in t+="events: {",r){t+=n+'"'+i+'": [';for(var a=r[i],s=0;s<a.length;s++)t+=o+a[s],o=", ";n=", ",o="",t+="]"}t+="}",delete e.events}for(var v in 0===e.flags&&delete e.flags,e)t+=""+n+v+": "+e[v],n=", ";return t+"}"},A=function(e,t){for(var n=e+": {",r="",o=0;o<t.length;o++){var i=t[o],a=i.value;0===a.length&&(a='""'),n+=r+'"'+i.name+'": '+a,r=", "}return n+"}"},O=function(e,t,n){var r=e.type;if("#text"===r){var o=y(e.value,n);return e.value=o.output,o.dynamic}if("m-insert"===r)return t.deep=!0,!0;var i=n.locals,a=!1,s=e.data;-1!==h.indexOf(r)&&(s.flags=2|s.flags);var v=e.props,d=v.length,f=[],u=[],l=[];e.props={attrs:f,dom:[],directives:u,specialDirectivesAfter:l};for(var c=0;c<d;c++){var p=v[c],m=q[p.name];if(void 0!==m){var b=m.after;void 0!==b&&l.push({prop:p,after:b});var x=m.before;void 0!==x&&!0===x(p,e,t,n)&&(a=!0)}}for(var A=0;A<d;A++){var w=v[A],N=w.name,C=q[N];if(void 0!==C){var k=C.during;void 0!==k&&(!0===k(w,e,t,n)&&(a=!0),f.push(w))}else if("m"===N[0]&&"-"===N[1])!0===g(w.value,n)&&(a=!0),u.push(w);else{var T=y(w.value,n);!0===T.dynamic&&(a=!0),w.value=T.output,f.push(w)}}for(var R=e.children,j=[],E=0;E<R.length;E++){var L=O(R[E],e,n);!0===L&&(a=!0),j.push(L)}for(var M=0;M<R.length;M++)if(!0===a&&!1===j[M]){var z=R[M].data;z.flags=1|z.flags}return n.locals=i,a},w=function(e,t,n){var r,o=e.type,i=e.data;if("#text"===o)r='m("#text", '+x(i)+", "+e.value+")";else if("m-insert"===o)r="instance.insert";else{r='m("'+o+'", {';var a=e.props,s="",v=a.attrs;0!==v.length&&(r+=A("attrs",v),s=", ");var d=a.directives;0!==d.length&&(r+=A(s+"directives",d),s=", ");var f=a.dom;0!==f.length&&(r+=A(s+"dom",f)),r+="}, "+x(i)+", ";for(var u="",l="",c=e.children,p=0;p<c.length;p++)u+=l+w(c[p],e,n),l=", ";!0===e.deep?r+="m.flatten(["+u+"]))":r+="["+u+"])";for(var h=a.specialDirectivesAfter,m=0;m<h.length;m++){var g=h[m];r=g.after(g.prop,r,e,t,n)}}return 1==(1&i.flags)?b(r,n.staticNodes):r},N={},C=/\.|\[/,k=function(e,t,n){var r=n.data,o=r.events;if(void 0===o)(o=r.events={})[e]=[t];else{var i=o[e];void 0===i?o[e]=[t]:i.push(t)}},T=function(e,t,n){n.props.dom.push({name:e,value:t})};N["m-if"]={before:function(e,t,n,r){var o=n.children,i=t.index+1,a=o[i];if(g(e.value,r),void 0!==a)for(var s=a.props,v=0;v<s.length;v++){if("m-else"===s[v].name){if(s.splice(v,1),!1===O(a,n,r))for(var d=a.children,f=0;f<d.length;f++){var u=d[f].data;u.flags=1|u.flags}e.data.elseOutput=w(a,n,r),o.splice(i,1);break}}return!0},after:function(e,t,n,r,o){var i=e.data.elseOutput;return void 0===i&&(i=b("m(\"#text\", {flags: 1}, '')",o.staticNodes)),e.value+" ? "+t+" : "+i}},N["m-for"]={before:function(e,t,n,r){n.deep=!0;var o=e.value.split(" in "),i=m(o[0]),a=o[1],s=e.data;return s.forIteratable=a,s.forAliases=i,r.locals=r.locals.concat(i.split(",")),g(a,r),!0},after:function(e,t,n,r,o){var i=e.data;return"m.renderLoop("+i.forIteratable+", function("+i.forAliases+") {return "+t+";})"}},N["m-on"]={before:function(e,t,n,r){var o=r.exclude,i=e.value;-1===i.indexOf("(")&&(i+="()"),k(e.argument,"function(event) {"+i+";}",t),o.push("event");var a=g(i,r);return o.pop(),a}},N["m-bind"]={before:function(e,t,n,r){var o,i,a=e.value,s=a.search(C);-1!==s&&(a='instance.get("'+(o=a.substring(0,s))+'")'+(i=a.substring(s)));var v="event.target.value",d=a;return k("input",-1===s?'function(event) {instance.set("'+a+'", '+v+");}":'function(event) {var boundValue = instance.get("'+o+'");boundValue'+i+" = "+v+';instance.set("'+o+'", boundValue);}',t),T("value",d,t),g(a,r)}},N["m-dom"]={before:function(e,t,n,r){var o=e.value;return T(e.argument,o,t),g(o,r)}},N["m-literal"]={during:function(e,t,n,r){var o=e.argument;return e.name=o,"class"===o&&(e.value="m.renderClass("+e.value+")"),g(e.value,r)}},N["m-mask"]={};var R={},q=N,j={},E=function(e,t){var n=function(n){var r=function(e){for(var t=r.handlers,n=0;n<t.length;n++)t[n](e)};r.handlers=t[n],t[n]=r,e.addEventListener(n,r)};for(var r in t)n(r)},L=function(e){var t,n=e.type,r=e.data;if("#text"===n)t=document.createTextNode(e.value);else{var o=e.children;t=2==(2&r.flags)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);for(var i=0;i<o.length;i++)S(o[i],t);var a=r.events;void 0!==a&&E(t,a),V(t,void 0,e,e.props)}return r.node=t,t},M=function(e,t,n){var r=n.options.props,o=t.props.attrs,i={};if(void 0!==r&&void 0!==o)for(var a=0;a<r.length;a++){var s=r[a];i[s]=o[s]}var v={root:e,props:i,insert:t.children},d=t.data.events;v.events=void 0===d?{}:d;var f=new n.CTor(v),u=t.data;u.component=f,u.node=f.root},z=function(e,t){t.appendChild(e)},S=function(e,t){var n=e.data.component;if(void 0===n)z(L(e),t);else{var r=document.createElement(e.type);z(r,t),M(r,e,n)}},Z=function(e,t){t.removeChild(e)},$=function(e,t,n){n.replaceChild(e,t)},_=function(e,t,n){var r=t.data,o=r.component;void 0!==o&&o.destroy();var i=e.data.component;void 0===i?$(L(e),r.node,n):M(r.node,e,i)},I=function(e,t,n,r){if("#text"===e)return{type:e,data:t,value:n};var o=j[e];return void 0!==o&&(n.component=o),{type:e,props:t,data:n,children:r}};I.flatten=function(e){for(var t=0;t<e.length;){var n=e[t];if(!0===Array.isArray(n)){var r=n.length;n.unshift(t,1),e.splice.apply(e,n),n.slice(2,0),t+=r}else t++}return e},I.renderClass=function(e){if("string"==typeof e)return e;var t="",n="";if(!0===Array.isArray(e))for(var r=0;r<e.length;r++)t+=n+I.renderClass(e[r]),n=" ";else if("object"==typeof e)for(var o in e)!0===e[o]&&(t+=n+o,n=" ");return t},I.renderLoop=function(e,t){var n;if(Array.isArray(e)){var r=e.length;n=new Array(r);for(var o=0;o<r;o++)n[o]=t(e[o],o)}else if("object"==typeof e)for(var i in n=[],e)n.push(t(e[i],i));else if("number"==typeof e){n=new Array(e);for(var a=0;a<e;a++)n[a]=t(a+1,a)}return n};var V=function(e,n,r,o){var i=o.attrs;if(void 0===i){if(void 0!==n)for(var a in n)e.removeAttribute(a)}else if(void 0===n)for(var s in i){var v=i[s];e.setAttribute(s,!0===v?"":v)}else{for(var d in i){var f=i[d],u=n[d];!1===f||void 0!==u&&f===u||e.setAttribute(d,!0===f?"":f)}for(var l in n){var c=i[l];void 0!==c&&!1!==c||e.removeAttribute(l)}}var p=o.directives;if(void 0!==p)for(var h in p){var m=R[h];void 0!==m?m(e,p[h],r):t('Could not find directive "'+h+'"')}var g=o.dom;if(void 0!==g)for(var y in g)e[y]=g[y]},D=function(e,t){for(var n in e)t[n].handlers=e[n]},H=function(e,t){var n=t.data;n.node=e;for(var r=t.props,o=e.attributes,i={},a=0;a<o.length;a++){var s=o[a];i[s.name]=s.value}V(e,i,t,r);var v=n.events;void 0!==v&&E(e,v);var d=r.dom;if(void 0===d||void 0===d.innerHTML&&void 0===d.textContent)for(var f=t.children,u=f.length,l=0,c=l===u?void 0:f[l],p=e.firstChild;void 0!==c||null!==p;){if(null===p)S(c,e);else{var h=p.nextSibling;if(void 0===c)Z(p,e);else{var m=c.data.component;if(void 0!==m)M(p,c,m);else{var g=c.type;p.nodeName.toLowerCase()!==g?$(L(c),p,e):"#text"===g?(p.textContent=c.value,c.data.node=p):H(p,c)}}p=h}c=++l<u?f[l]:void 0}},F=function(e,t){var r=t.data,o=r.node,i=e.props;V(o,t.props.attrs,e,i),t.props=i;var a=e.data.events;void 0!==a&&D(a,r.events),function(e,t,r){for(var o,i,a,s,v=e.length,d=t.length,f=v>d?v:d,u=0;u<f;u++)if(u>=v)o=t.pop(),i=r,s=void 0,a=o.data,void 0!==(s=a.component)&&s.destroy(),Z(a.node,i);else if(u>=d)S(t[u]=e[u],r);else{var l=e[u],c=t[u];if(l!==c){var p=l.type;if(p!==c.type)_(l,c,r),t[u]=l;else{var h=c.data,m=h.component;if(void 0!==m){var g=!1,y=m.options.props;if(void 0!==y){for(var b=l.props.attrs,x=m.observer,A=m.data,O=0;O<y.length;O++){var w=y[O];A[w]=b[w],x.notify(w)}g=!0}var N=l.data.events;void 0!==N&&D(N,h.events);var C=l.children;0!==C.length&&(m.insert=C,g=!0),!0===g&&(m.build(),n(m,"updated"))}else if("#text"===p){var k=l.value;h.node.textContent=k,c.value=k}else F(l,c)}}}}(e.children,t.children,o)},P=function(e){return function(e){var n={staticNodes:[],dependencies:{props:[],methods:[]},exclude:c,locals:[]};if(!1===O(e,void 0,n)){var r=e.data;r.flags=1|r.flags}for(var i=w(e,void 0,n),a=n.dependencies,s=a.props,v=a.methods,d="",f=n.staticNodes,u="",l=0,p="";l<s.length;l++){var h=s[l];d+="var "+h+' = instance.get("'+h+'");'}for(l=0;l<v.length;l++){var m=v[l];d+="var "+m+' = instance.methods["'+m+'"];'}for(l=0;l<f.length;l++)u+=p+f[l],p=", ";try{return new Function("m","var instance = this;var staticNodes = instance.compiledRender.staticNodes;"+d+"if(staticNodes === undefined) {staticNodes = instance.compiledRender.staticNodes = ["+u+"];}return "+i+";")}catch(e){return t("Could not create render function"),o}}(function(e){for(var t={type:"ROOT",props:{},children:[]},n=[t],r=0,o=0;o<e.length;o++){var i=e[o];if("Text"===i.type)n[r].children.push({type:"#text",data:{flags:0},value:i.value});else if("Tag"===i.type)if(!0===i.closeStart)n.pop(),r--;else{var a=i.value,s=n[r].children,v=s.length,d={type:a,index:v,props:i.attributes,data:{flags:0},children:[]};s[v]=d,!1===i.closeEnd&&-1===p.indexOf(a)&&(n.push(d),r++)}}return t.children[0]}(function(e){for(var t=e.length,n=[],r=0;r<t;){var o=e[r];if("<"===o)if(r++,"!--"===e.substring(r,r+3)){r+=3;var i=e.indexOf("--\x3e",r);r=-1===i?t:i+3}else{var a={type:"Tag",value:""},v="",f=[],c=!1,p=!1;for("/"===(o=e[r])&&(o=e[++r],c=!0);r<t&&">"!==o&&"/"!==o&&!1===s.test(o);)v+=o,o=e[++r];for(;r<t&&">"!==o&&("/"!==o||">"!==e[r+1]);)if(!0===s.test(o))o=e[++r];else{for(var h="",g="";r<t&&"="!==o&&!1===s.test(o)&&">"!==o&&("/"!==o||">"!==e[r+1]);)h+=o,o=e[++r];if("="===o){var y=" ";for('"'!==(o=e[++r])&&"'"!==o&&" "!==o&&"\n"!==o||(y=o,o=e[++r]);r<t&&">"!==o&&("/"!==o||">"!==e[r+1]);){if(o===y){o=e[++r];break}g+=o,o=e[++r]}}h=h.split(":"),f.push({name:h[0],value:g,argument:h[1],data:{}})}"/"===o?(r+=2,p=!0):r++,a.value=v,a.attributes=f,a.closeStart=c,a.closeEnd=p,n.push(a)}else{var b=e.substring(r),x=b.search(d),A=void 0;-1===x?(A=b,r=t):(A=b.substring(0,x),r+=x),0!==m(A).length&&n.push({type:"Text",value:A.replace(u,function(e){return l[e]})})}}return n}(e)))},B={config:{silent:!0},version:"0.11.0",util:{noop:o,log:e,error:t,m:I},use:function(e,t){e.init(ie,t)},compile:function(e){return P(e)},nextTick:function(e){setTimeout(e,0)},directive:function(e,t){R["m-"+e]=t},extend:function(e,r){function o(e){this.componentOptions=e,ie.apply(this,[r])}return r.name=e,void 0!==r.data&&"function"!=typeof r.data&&t("In components, data must be a function returning an object"),o.prototype=Object.create(ie.prototype),o.prototype.constructor=o,o.prototype.init=function(){var e=this.componentOptions,t=e.props,r=this.data;for(var o in t)r[o]=t[o];this.events=e.events,this.insert=e.insert,n(this,"init");var i=e.root;void 0!==i&&this.mount(i)},j[e]={CTor:o,options:r},o}},G=function(e){var t=this.observer,n=t.map,r=t.target;return void 0!==r&&(void 0===n[e]?n[e]=[r]:-1===n[e].indexOf(r)&&n[e].push(r)),this.data[e]},J=function(e,t){var r,o=this.observer;if("object"==typeof e){var i=this.data;for(var a in e)i[a]=e[a],o.notify(a)}else this.data[e]=t,o.notify(e);!1===(r=this).queued&&(r.queued=!0,setTimeout(function(){r.build(),r.queued=!1,n(r,"updated")},0))},K=function(){this.off(),this.root=void 0,this.queued=!0,n(this,"destroyed")},Q=function(e,t){var n=this.events,r=n[e];void 0===r?n[e]=[t]:r.push(t)},U=function(e,t){if(void 0===e)this.events={};else if(void 0===t)this.events[e]=[];else{var n=this.events[e],r=n.indexOf(t);n.splice(r,1)}},W=function(e,t){var n,r=this.events,o=r[e],i=r["*"];if(void 0!==o)for(n=0;n<o.length;n++)o[n](t);if(void 0!==i)for(n=0;n<i.length;n++)i[n](e,t)},X=function(e){var t=this.root="string"==typeof e?document.querySelector(e):e;r(this,"template",this.options.template,t.outerHTML),this.compiledRender===o&&(this.compiledRender=Moon.compile(this.template)),this.queued=!1;var i=this.render();if(t.nodeName.toLowerCase()===i.type)H(t,i);else{var a=L(i);$(a,t,t.parentNode),this.root=a}this.dom=i,n(this,"mounted")},Y=function(){return this.compiledRender(I)},ee=function(){var e=this.render(),t=this.dom;e!==t&&F(e,t)},te=function(){e("======= Moon ======="),n(this,"init");var t=this.options.root;void 0!==t&&this.mount(t)};function ne(){this.target=void 0,this.cache={},this.map={}}ne.prototype.notify=function(e){var t=this.map[e];if(void 0!==t)for(var n=0;n<t.length;n++)this.notify(t[n]);var r=this.cache;void 0!==r[e]&&(r[e]=void 0)};var re=function(e,t){var n=e.methods,r=function(r){n[r]=function(){return t[r].apply(e,arguments)}};for(var o in t)r(o)},oe=function(e,t){var n=e.data,r=e.observer,i=function(i){var a=t[i],s=a.get,v=a.set;Object.defineProperty(n,i,{get:function(){var t;return void 0===r.cache[i]?(r.target=i,t=s.call(e),r.target=void 0,r.cache[i]=t):t=r.cache[i],t},set:void 0===v?o:function(t){v.call(e,t)}})};for(var a in t)i(a)};function ie(e){void 0===e&&(e={}),this.options=e,r(this,"name",e.name,"Root"),this.root=void 0;var t=e.data;this.data=void 0===t?{}:"function"==typeof t?t():t;var n=e.methods;this.methods={},void 0!==n&&re(this,n),r(this,"compiledRender",e.render,o),r(this,"hooks",e.hooks,{}),this.events={},this.dom={},this.observer=new ne,this.queued=!0;var i=e.computed;void 0!==i&&oe(this,i),this.init()}return ie.prototype.get=G,ie.prototype.set=J,ie.prototype.destroy=K,ie.prototype.on=Q,ie.prototype.off=U,ie.prototype.emit=W,ie.prototype.mount=X,ie.prototype.render=Y,ie.prototype.build=ee,ie.prototype.init=te,ie.config=B.config,ie.version=B.version,ie.util=B.util,ie.use=B.use,ie.compile=B.compile,ie.nextTick=B.nextTick,ie.directive=B.directive,ie.extend=B.extend,ie});